FROM node:alpine

RUN apk add --no-cache                    \
        curl dbus firefox-esr gcc g++     \
        jq make libffi-dev openssl-dev    \
        python3 python3-dev uwsgi-python3 \
        xvfb

COPY ./src/app /app
COPY ./src/helpers /helpers
WORKDIR /app

RUN pip3 install -r requirements.txt   \
    && /bin/sh /helpers/geckoinstall.sh

CMD ["/bin/sh", "/helpers/run.sh"]

EXPOSE 10000
