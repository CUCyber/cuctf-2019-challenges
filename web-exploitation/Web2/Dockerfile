FROM alpine:3.7

COPY ./app /app
WORKDIR /app

RUN apk add --no-cache                      \
        gcc g++ gnupg make libffi-dev       \
        openssl-dev uwsgi-python3 python3   \
        python3-dev                         \
    && pip3 install -r requirements.txt

CMD [ "uwsgi", "--socket", "0.0.0.0:7100",  \
               "--uid", "uwsgi",            \
               "--plugins", "python3",      \
               "--protocol", "http",        \
               "--wsgi", "main:app" ]

EXPOSE 7100
